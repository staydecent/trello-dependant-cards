<html>
<head>
	<script src="https://trello.com/power-ups/power-up.min.js"></script>
	<script>
		TrelloPowerUp.initialize({
			'card-badges': function(t, card) {
				return [
					{
		        icon: './images/trello-icon-999.svg',
		        text: '2 Dependant cards'
					}
				];
			},

			'card-buttons': function(t, card) {
				return [
					{
						icon: './images/trello-icon-999.svg',
						text: "Dependant Cards",
						callback: function(t) {
							t.popup({
								title: 'Dependant Cards',
								url: './button-popup.html'
							});
						}
					}
				];
			},

			'attachment-sections': function(t, options) {
				console.log('attachment-sections', options, t)
				return t.get('card', 'shared', 'dependants').then(function (result) {
					console.log('PROMISE', result)
					return [
				    {
							icon: './images/trello-icon-999.svg',
				      title: "Dependant Cards",
				      claimed: [],
				      content: {
				        type: 'iframe',
				        url: t.signUrl('./attachment-section.html')
				      }
				    }
				  ];
				})
			}
		});
	</script>
</head>
<body>
</body>
</html>
